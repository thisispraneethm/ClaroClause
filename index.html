<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" content="#ffffff" />
    <meta
      name="description"
      content="ClaroClause - Simplify legal text instantly on your device."
    />
    <title>ClaroClause</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Lora:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
      :root {
        /* Base (Dark Theme) Variables - Refined for a more premium feel */
        --background-start-rgb: 10 10 15;
        --background-end-rgb: 23 23 30;
        --foreground-rgb: 225 225, 230;

        --card-rgb: 255 255 255;
        --card-foreground-rgb: 248 250 252;

        --primary: 167 139 250; /* A slightly softer, more vibrant violet */
        --primary-foreground: 10 10 15;

        --muted-rgb: 100 116 139;
        --muted-foreground-rgb: 156 163 175;
        
        --border-rgb: 255 255 255;
        --ring: 167 139 250;

        --risk-high-rgb: 248 113 113;
        --risk-medium-rgb: 251 191 36; /* Amber-400 for better vibrancy */
        --risk-low-rgb: 52 211 153; /* Emerald-400 for a fresher green */

        --destructive-rgb: 220 38 38;
        --destructive-foreground-rgb: 248 250 252;
      }
      
      html[data-theme='light'] {
        --background-start-rgb: 247 247 248; /* Off-white for a softer look */
        --background-end-rgb: 238 239 242;
        --foreground-rgb: 31 41 55; /* Slate-800 for stronger text contrast */
        
        --card-rgb: 0 0 0;
        --card-foreground-rgb: 17 24 39;
        
        --primary: 99 102 241;
        --primary-foreground: 255 255 255;
        
        --muted-rgb: 148 163 184;
        --muted-foreground-rgb: 100 116 139;
        
        --border-rgb: 0 0 0;
        --ring: 99 102 241;

        --risk-high-rgb: 239 68 68;
        --risk-medium-rgb: 245 158 11;
        --risk-low-rgb: 22 163 74; /* A stronger green for light mode */
        
        --destructive-rgb: 239 68 68;
        --destructive-foreground-rgb: 248 250 252;
      }
      
      html, body, #root {
        height: 100%;
        overflow: hidden;
      }

      body {
        color: rgb(var(--foreground-rgb));
        background-color: rgb(var(--background-start-rgb));
        overflow: hidden;
        font-size: clamp(14px, 1vw, 16px);
        line-height: 1.6;
        transition: background-color 0.3s ease, color 0.3s ease;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }
      
      /* Subtle, layered background for a premium feel */
      body::before {
        content: '';
        position: absolute;
        top: 0; left: 0; right: 0; bottom: 0;
        background: linear-gradient(175deg, rgba(var(--primary), 0.05) 0%, rgba(126, 34, 206, 0.0) 70%);
        background-size: 150% 150%;
        animation: aurora-bg 45s ease infinite;
        z-index: -2;
        will-change: background-position;
      }
      body::after {
        content: '';
        position: absolute;
        top: 0; left: 0; right: 0; bottom: 0;
        background-image: radial-gradient(rgba(var(--border-rgb), 0.05) 1px, transparent 1px);
        background-size: 24px 24px;
        z-index: -1;
        opacity: 0.5;
      }
      
      /* Refined scrollbar styling */
      ::-webkit-scrollbar {
        width: 10px;
        height: 10px;
      }
      ::-webkit-scrollbar-track {
        background-color: transparent;
      }
      ::-webkit-scrollbar-thumb {
        background-color: rgba(var(--border-rgb), 0.1);
        border-radius: 10px;
        border: 2px solid transparent;
        background-clip: content-box;
      }
      ::-webkit-scrollbar-thumb:hover {
        background-color: rgba(var(--border-rgb), 0.2);
      }
      
      /* Refined glass panel for a more subtle effect */
      .glass-panel {
        background-color: rgba(var(--card-rgb), 0.03);
        backdrop-filter: blur(40px);
        border: 1px solid rgba(var(--border-rgb), 0.06);
        box-shadow: 
          0 10px 30px rgba(0,0,0,0.1);
        position: relative;
        transition: background-color 0.3s ease, border-color 0.3s ease;
      }
      
      html[data-theme='light'] .glass-panel {
        background-color: rgba(255, 255, 255, 0.7);
        backdrop-filter: blur(24px);
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.03), 0 2px 4px -2px rgba(0, 0, 0, 0.03);
        border: 1px solid rgba(0, 0, 0, 0.05);
      }
      
      mark {
        background-color: rgba(var(--primary), 0.3);
        color: rgb(var(--card-foreground-rgb));
        padding: 0.2em 0.4em;
        border-radius: 6px;
        transition: background-color 0.3s ease, color 0.3s ease;
        box-shadow: 0 0 15px rgba(var(--primary), 0.2);
      }
    </style>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              border: 'rgba(var(--border-rgb), 0.1)',
              input: 'rgba(var(--input-rgb), 0.05)',
              ring: 'rgb(var(--ring))',
              background: 'rgb(var(--background-start-rgb))',
              foreground: 'rgb(var(--foreground-rgb))',
              primary: {
                DEFAULT: 'rgb(var(--primary))',
                foreground: 'rgb(var(--primary-foreground))',
              },
              secondary: {
                DEFAULT: 'rgb(var(--secondary-rgb))',
                foreground: 'rgb(var(--secondary-foreground-rgb))',
              },
              destructive: {
                DEFAULT: 'rgb(var(--destructive-rgb))',
                foreground: 'rgb(var(--destructive-foreground-rgb))',
              },
              muted: {
                DEFAULT: 'rgb(var(--muted-rgb))',
                foreground: 'rgb(var(--muted-foreground-rgb))',
              },
              card: {
                DEFAULT: 'rgba(var(--card-rgb), 0.05)',
                foreground: 'rgb(var(--card-foreground-rgb))',
              },
              risk: {
                  high: 'rgb(var(--risk-high-rgb))',
                  medium: 'rgb(var(--risk-medium-rgb))',
                  low: 'rgb(var(--risk-low-rgb))',
              }
            },
            fontFamily: {
              sans: ['Inter', 'sans-serif'],
              serif: ['Lora', 'serif'],
            },
            animation: {
              'aurora-bg': 'aurora-bg 45s ease infinite',
              'fade-in': 'fade-in 0.5s ease-out forwards',
              'slide-up': 'slide-up 0.5s ease-out forwards',
              'scale-in': 'scale-in 0.3s ease-out forwards',
              'subtle-pulse': 'subtle-pulse 3s infinite ease-out',
              'flow': 'flow 2s infinite ease-in-out',
            },
            keyframes: {
              'aurora-bg': {
                '0%, 100%': { backgroundPosition: '0% 50%' },
                '50%': { backgroundPosition: '100% 50%' },
              },
              'fade-in': {
                '0%': { opacity: '0' },
                '100%': { opacity: '1' },
              },
              'slide-up': {
                '0%': { transform: 'translateY(20px)', opacity: '0' },
                '100%': { transform: 'translateY(0)', opacity: '1' },
              },
              'scale-in': {
                  '0%': { transform: 'scale(0.95)', opacity: '0' },
                  '100%': { transform: 'scale(1)', opacity: '1' },
              },
              'subtle-pulse': {
                '0%, 100%': { transform: 'scale(1)', boxShadow: '0 0 0 0 rgba(var(--primary), 0.2)' },
                '50%': { transform: 'scale(1.03)', boxShadow: '0 0 40px 15px rgba(var(--primary), 0)' }
              },
              'flow': {
                  '0%': { transform: 'translateX(-100%)' },
                  '100%': { transform: 'translateX(100%)' },
              },
            },
            boxShadow: {
               'glass': 'inset 0 1px 1px 0 rgba(var(--border-rgb), 0.05)',
            }
          },
        },
      }
    </script>
    <!-- 
      FIX: This comment was enhanced to be an explicit, critical security warning.

      CRITICAL SECURITY WARNING: This application loads dependencies directly from a third-party CDN using an `importmap`.
      This approach has a significant, inherent security vulnerability: the `importmap` web standard DOES NOT support Subresource Integrity (SRI) hashes.
      
      RISK:
      Without SRI, there is no way to verify the integrity of the loaded scripts. If the CDN provider (esm.sh, aistudiocdn.com) is compromised, 
      an attacker could inject malicious code into this application. This is known as a supply-chain attack and could be used to steal user data
      or perform other malicious actions. This is a critical, unmitigated vulnerability for any production application.
      
      RECOMMENDED ARCHITECTURAL FIX:
      To mitigate this vulnerability, the application architecture MUST be updated to remove the reliance on `importmap` for production builds.
      The industry-standard solution is to use a JavaScript bundler (e.g., Vite, Webpack, Parcel) to vendor all dependencies
      and build a single, secure application bundle. This is the only way to ensure the integrity of the code running in the user's browser.
    -->
  <script type="importmap">
{
  "imports": {
    "@google/genai": "https://aistudiocdn.com/@google/genai@1.19.0",
    "react-dom": "https://aistudiocdn.com/react-dom@18.2.0",
    "react-dom/": "https://aistudiocdn.com/react-dom@18.2.0/",
    "framer-motion": "https://esm.sh/framer-motion@11.3.11?external=react",
    "react": "https://aistudiocdn.com/react@18.2.0",
    "react/": "https://aistudiocdn.com/react@18.2.0/",
    "dexie": "https://unpkg.com/dexie@4.0.7/dist/dexie.mjs"
  }
}
</script>
</head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
    <script type="module" src="/index.tsx"></script>
  </body>
</html>